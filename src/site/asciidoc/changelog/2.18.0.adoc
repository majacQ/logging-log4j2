////
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

         https://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
////

////
*DO NOT EDIT THIS FILE!!*
This file is automatically generated from the release changelog directory!
////

= 2.18.0 (2022-06-28)

The Apache Log4j 2 team is pleased to announce the Log4j 2.17.2 release!

Apache Log4j is a well-known framework for logging application behavior.
Log4j 2 is an upgrade to Log4j that provides significant improvements over its predecessor, Log4j 1.x, and provides many other modern features such as support for Markers, lambda expressions for lazy logging, property substitution using Lookups, multiple patterns on a `PatternLayout` and asynchronous Loggers.
Another notable Log4j 2 feature is the ability to be _garbage-free_ (avoid allocating temporary objects) while logging.
In addition, Log4j 2 will not lose events while reconfiguring.

The artifacts may be downloaded from https://logging.apache.org/log4j/2.x/download.html[].

This release primarily contains bug fixes and minor enhancements.

Due to a break in compatibility in the SLF4J binding, Log4j now ships with two versions of the SLF4J to Log4j adapters.
`log4j-slf4j-impl` should be used with SLF4J 1.7.x and earlier and `log4j-slf4j18-impl` should be used with SLF4J 1.8.x and later.
SLF4J-2.0.0 alpha releases are not fully supported.
See https://issues.apache.org/jira/browse/LOG4J2-2975[LOG4J2-2975] and https://jira.qos.ch/browse/SLF4J-511[SLF4J-511].

The Log4j 2.18.0 API, as well as many core components, maintains binary compatibility with previous releases.

Apache Log4j 2.18.0 requires a minimum of Java 8 to build and run.
Log4j 2.12.4 is the last release to support Java 7.
Log4j 2.3.2 is the last release to support Java 6.
Java 6 and Java 7 are no longer supported by the Log4j team.

For complete information on Apache Log4j 2, including instructions on how to submit bug reports, patches, or suggestions for improvement, see http://logging.apache.org/log4j/2.x/[the Apache Log4j 2 website].

== Changes

=== Added

* Add MutableThreadContextMapFilter. (for https://issues.apache.org/jira/browse/LOG4J2-3495[LOG4J2-3495] by `rgoers`)
* Add support for custom LMAX disruptor WaitStrategy configuration. (for https://issues.apache.org/jira/browse/LOG4J2-3472[LOG4J2-3472] by `rpopma`)
* Add support for custom Log4j 1.x levels. (for https://issues.apache.org/jira/browse/LOG4J2-3419[LOG4J2-3419] by `pkarwasz`)
* Add support for adding and retrieving appenders in Log4j 1.x bridge. (for https://issues.apache.org/jira/browse/LOG4J2-3440[LOG4J2-3440] by `pkarwasz`)
* Add support for Apache Extras' RollingFileAppender in Log4j 1.x bridge. (for https://issues.apache.org/jira/browse/LOG4J2-3483[LOG4J2-3483] by `pkarwasz`)
* Add support for Jakarta Mail API in the SMTP appender. (for https://issues.apache.org/jira/browse/LOG4J2-3362[LOG4J2-3362] by `pkarwasz`)
* Add support for 24 colors in highlighting (for https://issues.apache.org/jira/browse/LOG4J2-3538[LOG4J2-3538] by `pkarwasz`, Pavel_K)

=== Changed

* Upgrade the Flume Appender to Flume 1.10.0 (for https://issues.apache.org/jira/browse/LOG4J2-3536[LOG4J2-3536] by `rgoers`)
* Move perf tests to log4j-core-its (for https://issues.apache.org/jira/browse/LOG4J2-3516[LOG4J2-3516] by `rgoers`)
* Support Spring 2.6.x. (for https://issues.apache.org/jira/browse/LOG4J2-3506[LOG4J2-3506] by `rgoers`)
* Make the default disruptor WaitStrategy used by Async Loggers garbage-free. (for https://issues.apache.org/jira/browse/LOG4J2-3473[LOG4J2-3473] by `rpopma`)
* Do not throw UnsupportedOperationException when JUL ApiLogger::setLevel is called. (for https://issues.apache.org/jira/browse/LOG4J2-3476[LOG4J2-3476] by `rpopma`)
* Improves ServiceLoader support on servlet containers. (for https://issues.apache.org/jira/browse/LOG4J2-3427[LOG4J2-3427] by `pkarwasz`)

=== Fixed

* DirectWriteRolloverStrategy should use the current time when creating files. (for https://issues.apache.org/jira/browse/LOG4J2-3339[LOG4J2-3339] by `rgoers`)
* Fix LevelRangeFilterBuilder to align with log4j1's behavior. (for https://issues.apache.org/jira/browse/LOG4J2-3534[LOG4J2-3534] by `pkarwasz`, Yohei Ueki)
* The DirectWriteRolloverStrategy was not detecting the correct index to use during startup. (for https://issues.apache.org/jira/browse/LOG4J2-3490[LOG4J2-3490] by `rgoers`)
* Don't use Paths.get() to avoid circular file systems. (for https://issues.apache.org/jira/browse/LOG4J2-3527[LOG4J2-3527] by `rgoers`)
* SizeBasedTriggeringPolicy would fail to rename files properly when integer pattern contained a leading zero. (for https://issues.apache.org/jira/browse/LOG4J2-3432[LOG4J2-3432] by `rgoers`)
* Allow enterprise id to be an OID fragment. (for https://issues.apache.org/jira/browse/LOG4J2-1376[LOG4J2-1376] by `pkarwasz`, Mark Niggemann)
* Async Loggers were including the location information by default. (for https://issues.apache.org/jira/browse/LOG4J2-3491[LOG4J2-3491] by `rgoers`, Avihai Marchiano)
* UrlConnectionFactory.createConnection now accepts an AuthorizationProvider as a parameter. (for https://issues.apache.org/jira/browse/LOG4J2-3482[LOG4J2-3482] by `rgoers`)
* HttpWatcher did not pass credentials when polling. (for https://issues.apache.org/jira/browse/LOG4J2-3481[LOG4J2-3481] by `rgoers`)
* ClassArbiter's newBuilder method referenced the wrong class. (for https://issues.apache.org/jira/browse/LOG4J2-3493[LOG4J2-3493] by `rgoers`, Dmytro Voloshyn)
* Fix resolution of non-Log4j properties. (for https://issues.apache.org/jira/browse/LOG4J2-3413[LOG4J2-3413] by `pkarwasz`)
* JAR file containing Log4j configuration isn't closed. (for https://issues.apache.org/jira/browse/LOG4J2-3423[LOG4J2-3423] by `ggregory`, Radim Tlusty)
* Improve JsonTemplateLayout performance. (for https://issues.apache.org/jira/browse/LOG4J2-3393[LOG4J2-3393] by `vy`)
* Properties defined in configuration using a value attribute (as opposed to element) are read correctly. (for https://issues.apache.org/jira/browse/LOG4J2-3424[LOG4J2-3424] by `ckozak`)
* Add the missing context stack to JsonLayout template. (for https://issues.apache.org/jira/browse/LOG4J2-3477[LOG4J2-3477] by `vy`, filipc)
* Log4j 1.2 bridge should not wrap components unnecessarily. (for https://issues.apache.org/jira/browse/LOG4J2-3426[LOG4J2-3426] by `pkarwasz`, Pooja Pandey)
* Improve validation and reporting of configuration errors. (by `pkarwasz`)
* Log4j 1.2 bridge should generate Log4j 2.x messages based on the parameter runtime type. (by `pkarwasz`)
* Syslog appender lacks the SocketOptions setting. (for https://issues.apache.org/jira/browse/LOG4J2-3425[LOG4J2-3425] by `ggregory`, Jiří Smolík)
* Avoid ClassCastException in JeroMqManager with custom LoggerContextFactory #791. (for https://issues.apache.org/jira/browse/LOG4J2-3040[LOG4J2-3040] by `ggregory`, LF-Lin)
* Fixes Spring Boot logging system registration in a multi-application environment. (for https://issues.apache.org/jira/browse/LOG4J2-3418[LOG4J2-3418] by `pkarwasz`)
* Fixes appender concurrency problems in Log4j 1.x bridge. (for https://issues.apache.org/jira/browse/LOG4J2-3447[LOG4J2-3447] by `pkarwasz`, Pooja Pandey)
* Fixes default SslConfiguration, when a custom keystore is used. (for https://issues.apache.org/jira/browse/LOG4J2-3439[LOG4J2-3439] by `pkarwasz`, Jayesh Netravali)
* Fix minor typo #792. (by `ggregory`, LF-Lin)
* LocalizedMessage logs misleading errors on the console. (for https://issues.apache.org/jira/browse/LOG4J2-3458[LOG4J2-3458] by `ggregory`)
* Fix and test for race condition in FileUtils.mkdir(). (for https://issues.apache.org/jira/browse/LOG4J2-3452[LOG4J2-3452] by `pkarwasz`, Stefan Vodita)
* Fixes the syslog appender in Log4j 1.x bridge, when used with a custom layout. (for https://issues.apache.org/jira/browse/LOG4J2-3359[LOG4J2-3359] by `pkarwasz`, Tukesh)
* Fix problem with non-uppercase custom levels. (for https://issues.apache.org/jira/browse/LOG4J2-2872[LOG4J2-2872] by `pkarwasz`, Alla Gofman)
* log4j-1.2-api 2.17.2 throws NullPointerException while removing appender with name as null. (for https://issues.apache.org/jira/browse/LOG4J2-3359[LOG4J2-3359] by `ggregory`, Rajesh)
* Add missing message parameterization in RegexFilter. (for https://issues.apache.org/jira/browse/LOG4J2-3475[LOG4J2-3475] by `pkarwasz`, Jeremy Lin)
* Fix parsing error, when XInclude is disabled. (for https://issues.apache.org/jira/browse/LOG4J2-3531[LOG4J2-3531] by `pkarwasz`, Simo Nikula)
* Update 3rd party dependencies for 2.18.0. (for https://issues.apache.org/jira/browse/LOG4J2-3428[LOG4J2-3428] by `ggregory`)
* Fixes problem with wrong ANSI escape code for bright colors (for https://issues.apache.org/jira/browse/LOG4J2-3537[LOG4J2-3537] by `pkarwasz`, Pavel_K)
